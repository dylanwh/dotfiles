source ~/.mutt/t-prot
source ~/.mutt/gnupg
source ~/.mutt/theme

# Identity options
set realname="Dylan William Hardison"
set from="dylan@hardison.net"

# Recongize messages addressed to me.
alternates dylanwh@gmail.com \
           dylan@haverdev.org \
           dylan@sinedev.org \
           dylan@midgetbutton.com \
           dylanwh@tampabay.rr.com \
           dylan\\+[a-z]+@hardison.net \
           it@hardison.net \
           dylan@lofn.hardison.net \
           Hardison.Dylan8811@myspcmail.spcollege.edu

# And messages to mailing lists I subscribe to.
subscribe slug@nks.net \
          slug-politics@nks.net \
          haskell-cafe@haskell.org \
          caml-list@inria.fr \
          caml-list@yquem.inria.fr \
          templates@template-toolkit.org \
          macarthur@genesisfleet.com \
          module-authors@perl.org \
          poe@perl.org \
          dwm@suckless.org \
          dev@suckless.org \
          members@issmacarthur.com \
          members@lists.issmacarthur.com \
          members@lists.deepspace2.com \
          pup@possumism.net \
          tbad@tampabad.org \
          billing@hardison.net \
          debian-security-announce@lists.debian.org \
          mailall@myspcmail.spcollege.edu

# Location options
set mbox_type=Maildir
set folder=~/mail
set spoolfile="+inbox"
set mbox="+read/`date +%Y/%m`"
set record="+sent/`date +%Y`"
set postponed="+drafts"
set signature="~/bin/signature|"

set history_file=~/.mutt/history
set history=1000
set save_history=1000

source "mailboxes $folder |"

# Behavior options
set use_from
set envelope_from
set sendmail="/usr/bin/msmtp"
set reply_to             # Always use reply-to
set ignore_list_reply_to # Except for mailing lists.
set mail_check=80        # Check mailboxes every 80 seconds
set menu_scroll          # Scroll line by line.
set pager_stop           # Page down doesn't go to next message.
set nomove               # I do not want to move read mail to my read mail directory.
set noconfirmappend      # Don't ask me to add messages to existing mailbox.
set delete               # Don't ask me if I want to delete something
set fast_reply           # Don't ask me questions when I reply to a message
set noprompt_after       # don't ask me for additional commands.
set reverse_alias        # Map email addresses back to aliases.
set reverse_name         # Reply as the target of the email
set include              # Always include messages in replies.
set tilde                # Use tildes in the internal pager like vim.
set nohelp               # Don't show the help menu at the top

set xterm_set_titles
set sidebar_delim=' '
set sidebar_visible=no
set pager_index_lines=0

set sort=threads
set sort_aux=date
set thread_received=no

folder-hook . push "\eV" # By default, collapse all threads
set nocollapse_unread    # Except those with new messages.

my_hdr Reply-By: `date --date="-3 days"`
my_hdr X-Message-Flag: OUTLOOK ERROR: Message in violation of Microsoft Security Policy (MSP).
my_hdr X-Religion: Optimus Prime

# Recognize spam
spam "X-Spam-Status: Yes" "spam"

# These bindings make mutt act like vim, a bit.
bind index        zo           collapse-thread
bind index        zc           collapse-thread
bind index        G            last-entry
bind index        gg           first-entry
bind index        o            display-message
bind index       <Esc>[A       previous-undeleted
bind index       <Esc>[B       next-undeleted
bind index       <Esc>[C       next-page
bind index       <Esc>[D       previous-page
bind index       <Esc>0A       previous-undeleted
bind index       <Esc>0B       next-undeleted
bind index       <Esc>0C       next-page
bind index       <Esc>0D       previous-page
bind pager,index <Esc>j        sidebar-next
bind pager,index <Esc>k        sidebar-prev
bind pager,index <Esc>o        sidebar-open
bind pager,index <Esc><Return> sidebar-open

macro generic,pager,index <F1> ":toggle sidebar_visible\n" "toggle sidebar"
macro generic,pager,index <F2> ":toggle arrow_cursor\n"    "toggle arrow cursor"
macro index               A    "T.\n;WO;WN;t"              "mark all as read"
macro index               S    "D~H spam\n"                "delete all spam"
macro index,pager         i    "c +inbox\n"                "go to inbox"

# Reply as a specific address for mailing list
send-hook '~t pup@possumism.net' 'set from="Dylan William Hardison <dylan+pup@hardison.net>"'
