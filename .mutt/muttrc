source ~/.mutt/t-prot
source ~/.mutt/gnupg

set history_file=~/.mutt/history
set history=1000
set save_history=1000

set mbox_type=Maildir
set folder=~/mail
set spoolfile="+inbox"

# Behavior options
set use_from
set envelope_from
set sendmail="/usr/bin/msmtp"
set reply_to             # Always use reply-to
set ignore_list_reply_to # Except for mailing lists.
set mail_check=60        # Check mailboxes every 80 seconds
set menu_scroll          # Scroll line by line.
set pager_stop           # Page down doesn't go to next message.
set nomove               # I do not want to move read mail to my read mail directory.
set noconfirmappend      # Don't ask me to add messages to existing mailbox.
set delete               # Don't ask me if I want to delete something
set fast_reply           # Don't ask me questions when I reply to a message
set noprompt_after       # don't ask me for additional commands.
set reverse_alias        # Map email addresses back to aliases.
set reverse_name         # Reply as the target of the email
set include              # Always include messages in replies.
set tilde                # Use tildes in the internal pager like vim.
set nohelp               # Don't show the help menu at the top

set imap_idle=yes
set imap_passive=no
set imap_servernoise=no
set imap_headers="X-Spam-Status"
set header_cache="~/.mutt/cache"
set message_cachedir="~/.mutt/cache"

set xterm_set_titles
set sidebar_delim=' '
set sidebar_visible=no
set pager_index_lines=0

set sort=threads
set sort_aux=date
set thread_received=no

folder-hook . push "\eV" # By default, collapse all threads
set nocollapse_unread    # Except those with new messages.

# Recognize spam
spam "X-Spam-Status: Yes" "spam"

# These bindings make mutt act like vim, a bit.
bind index        zo           collapse-thread
bind index        zc           collapse-thread
bind index        G            last-entry
bind index        gg           first-entry
bind index        o            display-message
bind index       <Esc>[A       previous-undeleted
bind index       <Esc>[B       next-undeleted
bind index       <Esc>[C       next-page
bind index       <Esc>[D       previous-page
bind index       <Esc>0A       previous-undeleted
bind index       <Esc>0B       next-undeleted
bind index       <Esc>0C       next-page
bind index       <Esc>0D       previous-page
bind pager,index <Esc>j        sidebar-next
bind pager,index <Esc>k        sidebar-prev
bind pager,index <Esc>o        sidebar-open
bind pager,index <Esc><Return> sidebar-open

macro generic,pager,index <F1> ":toggle sidebar_visible\n" "toggle sidebar"
macro generic,pager,index <F2> ":toggle arrow_cursor\n"    "toggle arrow cursor"
macro generic,pager,index <F3>     "!muttprofile\n:source ~/.mutt/profile.active\nm" "New message with profile"
macro index               A    "T.\n;WO;WN;t"              "mark all as read"
macro index               S    "D~H spam\n"                "delete all spam"
macro index,pager         i    "c +inbox\n"                "go to inbox"
macro index,pager         I    "c +[Gmail]/Important\n"    "go to important"

# Reply as a specific address for mailing list
send-hook '~t pup@possumism.net' 'set from="Dylan William Hardison <dylan+pup@hardison.net>"'

source ~/.mutt/profile.active
