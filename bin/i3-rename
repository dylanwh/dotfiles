#!/bin/zsh

function i3_workspace {
    i3-msg -t get_workspaces \
        | jshon -a -e num -u -p -e visible -u -p -e focused -u \
        | paste -s -d '\t\t\n' \
        | awk '$2 == "true" && $3 == "true" { print $1 }'
}

num=$(i3_workspace)

exec i3-input -F 'rename workspace to "'$num': %s"' -P 'New name: '
