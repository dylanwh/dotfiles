#!/bin/zsh

integer xmobar_width=92
integer trayer_width=7
integer trayer_height=20

xmobar=/usr/bin/xmobar

if [[ -f /tmp/be-$1 ]]; then
	kill $(cat /tmp/be-$1)
	rm /tmp/be-$1
fi

echo $$ > /tmp/be-$1

case $1 in
	trayer)
		sleep .5
		exec trayer \
			--edge top \
			--align right \
			--SetDockType true \
			--SetPartialStrut true \
			--expand true \
			--widthtype percent \
			--width $trayer_width \
			--height $trayer_height \
			--transparent true \
			--tint '0x000000'
	;;
	xmobar)
		sleep .5
		ttpp -Dwidth=$xmobar_width < ~/.xmobarrc.tt >! ~/.xmobarrc
		exec $xmobar ~/.xmobarrc
	;;
esac
