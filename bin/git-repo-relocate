#!/usr/bin/env fish

set repo_dir $argv[1]
if [ -z "$repo_dir" ]
    set repo_dir (pwd)
    pushd ..
end
set repo_url (git -C "$repo_dir" remote get-url origin)
or set repo_url (basename $repo_dir)
set repo_name (git-repo-name $repo_url)
or begin
    echo "error finding repo name for $repo_url" >&2
    exit 1
end
set basename (basename $repo_name)
set dirname $HOME/Git/(dirname $repo_name)
mkdir -p $dirname
if [ "$repo_dir" != "$dirname/$basename" ]
    mv $repo_dir $dirname
    echo $dirname/$basename
end
