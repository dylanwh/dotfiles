#!zsh

local RESET="%{$reset_color%}"
local YELLOW="%{${fg[yellow]}%}"
local GREEN="%{${fg[green]}%}"
local MAGENTA="%{${fg[magenta]}%}"
local BOLD_GREEN="%{${fg_bold[green]}%}"
local RED="%{${fg[red]}%}"
local GREY="%{${fg_bold[grey]}%}"
local BLUE="%{${fg[blue]}%}"
local BOLD_BLUE="%{${fg_bold[blue]}%}"

PR_TIME="$YELLOW%D{%H:%M}$RESET"
PR_DATE="$YELLOW%D{%b-%d}$RESET"
PR_DIR="$BOLD_BLUE%~$RESET"
PR_NAME="$BOLD_GREEN%n$RESET"
PR_HOST="$BOLD_GREEN%m$RESET"
PR_JOBS="%2(j.($MAGENTA%j jobs$RESET).%1(j.($MAGENTA%j job$RESET).))"
PR_VCS='${vcs_info_msg_0_}'

autoload -Uz vcs_info
zstyle ':vcs_info:*' enable svn svk git
zstyle ':vcs_info:*' actionformats \
    '(%F{2}%s:%b, %a%f)'
zstyle ':vcs_info:*' formats       \
    '(%F{2}%s:%b%f)'
zstyle ':vcs_info:(sv[nk]|bzr):*' branchformat '%b:%r'

vcs_info
precmd_functions=( $precmd_functions vcs_info )

PROMPT="$PR_NAME@$PR_HOST:$PR_DIR%# "
RPROMPT="$PR_VCS$PR_JOBS"
PS2='%_: '
RPS2=''

alias norp='unset RPROMPT'

prompt_opts=( cr percent subst )
