#!zsh

local RESET="%{$reset_color%}"
local YELLOW="%{${fg[yellow]}%}"
local GREEN="%{${fg[green]}%}"
local RED="%{${fg[red]}%}"
local GREY="%{${fg_bold[grey]}%}"
local BOLD_BLUE="%{${fg_bold[blue]}%}"

PR_TIME="$RED%D{%H:%M}$RESET"
PR_DIR="$BOLD_BLUE%~/$RESET"
PR_NAME="$YELLOW%n"
PR_HOST="%m$RESET"
PR_JOBS="%2(j. ($GREEN%j jobs$RESET).%1(j. ($YELLOW%j job$RESET).))"

function PR_BRANCH {
	local branch=$(git branch 2>/dev/null | sed -n 's/^* \(.\+\)/\1/p')
	if [[ -n $branch ]]; then
		echo -n " [%{${fg[magenta]}%}$branch%{$reset_color%}]"
	fi
}

# %1(j.%j jobs.)
prompt='$PR_TIME '$GREY'<'$RESET'$PR_NAME@$PR_HOST'$GREY'>'$RESET' $PR_DIR$(PR_BRANCH)$PR_JOBS
%# '

prompt_opts=( cr percent subst )
